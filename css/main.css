:root {
  --green-dark: #14532d;
  --green: #16a34a;
  --green-soft: #bbf7d0;
  --bg: #020617;
  --card-bg: #020617;
  --border: #1f2937;
  --text-main: #e5e7eb;
  --text-soft: #9ca3af;
  --danger: #b91c1c;
  --radius-lg: 14px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #022c22 0, #020617 45%, #000 100%);
  color: var(--text-main);
}

button { font-family: inherit; }
.hidden { display: none !important; }
a { color: inherit; text-decoration: none; }

#auth-screen, #app-screen {
  max-width: 1200px;
  margin: 0 auto;
  padding: 16px;
}

/* ================= HEADER APP ================= */

header.app-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 12px;
}

.title-block h1 {
  margin: 0;
  font-size: 1.35rem;
  letter-spacing: 0.02em;
}

.title-block .subtle {
  margin: 6px 0 0;
  font-size: 0.85rem;
  color: var(--text-soft);
}

.header-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
}

.status-pill {
  font-size: 0.8rem;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid #15803d55;
  background: #064e3b;
  color: #bbf7d0;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  max-width: 280px;
}

.status-pill.offline {
  border-color: #b91c1c88;
  background: #450a0a;
  color: #fecaca;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: #22c55e;
  box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
}

.status-pill.offline .status-dot {
  background: #f97316;
  box-shadow: 0 0 0 4px rgba(248, 113, 113, 0.25);
}

.brand-mini {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-soft);
}

.brand-mini-logo {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  background: radial-gradient(circle at 30% 20%, #facc15 0, #ea580c 45%, #7c2d12 100%);
  box-shadow: 0 10px 24px rgba(0,0,0,.6);
}

.brand-mini-name {
  font-size: .8rem;
  letter-spacing: .08em;
  text-transform: none;
}

.user-info {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
  font-size: .82rem;
}

.user-email { color: var(--text-soft); }

.btn-ghost {
  border-radius: 999px;
  border: 1px solid #4b5563;
  background: transparent;
  color: var(--text-soft);
  padding: 5px 12px;
  font-size: 0.8rem;
  cursor: pointer;
}
.btn-ghost:hover { border-color: #9ca3af; color: #e5e7eb; }

/* ================= LOGIN ================= */

.auth-header { margin-top: 26px; margin-bottom: 8px; }
.brand-hero { display: flex; flex-direction: column; align-items: center; gap: 10px; }

.brand-logo {
  width: 96px; height: 96px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 46px;
  background: radial-gradient(circle at 30% 20%, #facc15 0, #ea580c 45%, #7c2d12 100%);
  box-shadow: 0 18px 40px rgba(0,0,0,.75);
}

.brand-name {
  font-size: 2.0rem;
  font-weight: 750;
  letter-spacing: 0.12em;
}

#auth-card {
  margin-top: 18px;
  max-width: 420px;
  margin-left: auto;
  margin-right: auto;
  padding: 24px 20px 20px;
  border-radius: var(--radius-lg);
  background: radial-gradient(circle at top left, #04785744, #020617 45%, #000 100%);
  border: 1px solid #1f2937;
  box-shadow: 0 18px 45px rgba(0,0,0,.75);
}

#auth-card h2 { margin: 0 0 4px; font-size: 1.25rem; }
#auth-card p { margin: 0 0 18px; color: var(--text-soft); font-size: .9rem; }

.auth-field { margin-bottom: 14px; }
.auth-field label { display: block; font-size: .82rem; margin-bottom: 4px; color: var(--text-soft); }
.auth-field input {
  width: 100%;
  padding: 9px 10px;
  border-radius: 10px;
  border: 1px solid #374151;
  background: #020617;
  color: var(--text-main);
  font-size: 0.95rem;
  outline: none;
}
.auth-field input:focus {
  border-color: #22c55e88;
  box-shadow: 0 0 0 3px rgba(34,197,94,.15);
}

.auth-buttons { display: flex; gap: 8px; margin-top: 6px; }

.btn-primary {
  flex: 1;
  background: linear-gradient(135deg, var(--green), #22c55e);
  border: none;
  padding: 9px 10px;
  border-radius: 999px;
  color: #022c22;
  font-weight: 700;
  cursor: pointer;
  font-size: 0.95rem;
  box-shadow: 0 10px 30px rgba(34,197,94,.35);
}
.btn-outline {
  flex: 1;
  background: transparent;
  border-radius: 999px;
  border: 1px solid #4b5563;
  color: var(--text-main);
  cursor: pointer;
  font-size: 0.95rem;
}

.btn-google {
  margin-top: 10px;
  width: 100%;
  border-radius: 999px;
  border: 1px solid #1f2937;
  background: #020617;
  color: var(--text-main);
  padding: 9px 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  font-size: 0.95rem;
  box-shadow: 0 8px 24px rgba(0,0,0,.65);
}

.btn-google-icon {
  width: 18px; height: 18px;
  border-radius: 4px;
  background: conic-gradient(from 45deg,
    #4285f4 0 25%,
    #34a853 25% 50%,
    #fbbc05 50% 75%,
    #ea4335 75% 100%);
}

.auth-msg { margin-top: 12px; font-size: .82rem; min-height: 16px; }
.auth-msg.error { color: #fecaca; }
.auth-msg.ok { color: #bbf7d0; }

/* ================= APP GRID ================= */

.app-grid {
  display: grid;
  grid-template-columns: minmax(260px, 340px) minmax(0, 1fr);
  gap: 12px;
  align-items: stretch;
}

.card {
  background: radial-gradient(circle at top left, #065f4633, #020617 60%, #000 100%);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  padding: 14px 14px 12px;
  box-shadow: 0 16px 40px rgba(0,0,0,.75);
}

.card h3 { margin: 0 0 8px; font-size: 1rem; display: flex; align-items: center; gap: 6px; }
.card-subtitle { margin: 0 0 12px; font-size: .82rem; color: var(--text-soft); }

.badge {
  font-size: .72rem;
  padding: 2px 8px;
  border-radius: 999px;
  background: #022c22;
  color: #bbf7d0;
  border: 1px solid #14532d;
}

.controls-grid { display: grid; grid-template-columns: 1.6fr 1.4fr; gap: 8px; margin-bottom: 10px; }

.btn-lg {
  width: 100%;
  border-radius: 999px;
  padding: 10px 12px;
  border: none;
  font-size: 0.96rem;
  font-weight: 750;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.btn-start {
  background: linear-gradient(135deg, #16a34a, #22c55e);
  color: #022c22;
  box-shadow: 0 0 0 1px #15803d, 0 10px 25px rgba(16,185,129,.5);
}
.btn-stop {
  background: linear-gradient(135deg, #b91c1c, #f97316);
  color: #fff7ed;
  box-shadow: 0 0 0 1px #b91c1c, 0 10px 25px rgba(248,113,113,.5);
}
.btn-secondary {
  background: #020617;
  color: var(--text-main);
  border: 1px solid #4b5563;
  box-shadow: 0 8px 20px rgba(0,0,0,.65);
}

.info-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: .82rem;
  color: var(--text-soft);
  padding-top: 8px;
  border-top: 1px dashed #1f2937;
  margin-top: 10px;
}

.info-pill {
  padding: 3px 10px;
  border-radius: 999px;
  background: #020617;
  border: 1px solid #1f2937;
}

/* ================= MAPA ================= */

#map {
  width: 100%;
  height: 340px;
  min-height: 340px;
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.leaflet-container { background: #020617; }

/* ================= LISTA TRAJETOS ================= */

.routes-section {
  margin-top: 16px;
  margin-bottom: 28px;
}

.routes-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.routes-header h3 { margin: 0; font-size: .98rem; }

.route-empty {
  font-size: .85rem;
  color: var(--text-soft);
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px dashed #1f2937;
  background: #02061766;
}

.route-card {
  margin-top: 8px;
  border-radius: 12px;
  border: 1px solid #1f2937;
  background: #020617d9;
  padding: 10px 12px 8px;
  font-size: .84rem;
  display: grid;
  grid-template-columns: 1.6fr 1fr;
  gap: 10px;
  align-items: flex-start;
}

.route-main strong { display: block; margin-bottom: 2px; }
.route-meta { color: var(--text-soft); font-size: .77rem; }

.route-actions { display: flex; flex-wrap: wrap; gap: 6px; justify-content: flex-end; align-items: flex-start; }

.btn-xs {
  border-radius: 999px;
  border: 1px solid #4b5563;
  background: #020617;
  color: var(--text-soft);
  padding: 5px 10px;
  font-size: .78rem;
  cursor: pointer;
}
.btn-xs:hover { border-color: #9ca3af; color: #e5e7eb; }

.btn-xs.danger { border-color: #7f1d1d; color: #fecaca; }

.thumbs-row { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
.thumb {
  width: 46px; height: 46px;
  object-fit: cover;
  border-radius: 8px;
  border: 1px solid #1f2937;
  cursor: pointer;
}

/* ================= MODAL FOTO ================= */

#photo-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.85);
  z-index: 9999;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 16px;
}
#photo-modal img {
  max-width: 100%;
  max-height: 100%;
  border-radius: 12px;
  box-shadow: 0 20px 50px rgba(0,0,0,.9);
}
#photo-modal-close {
  position: fixed;
  top: 16px;
  right: 16px;
  border-radius: 999px;
  border: 1px solid #4b5563;
  background: #020617;
  color: #e5e7eb;
  padding: 7px 12px;
  cursor: pointer;
  font-size: .85rem;
}

/* ================= MODAL NINHO ================= */

.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.82);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9000;
  padding: 16px;
}

.modal-card {
  width: 100%;
  max-width: 390px;
  background: #020617;
  border-radius: 18px;
  border: 1px solid #1f2937;
  box-shadow: 0 22px 50px rgba(0,0,0,.9);
  padding: 16px 18px 14px;
  color: var(--text-main);
}

.modal-card h4 { margin: 0 0 4px; }
.modal-card p { margin: 0 0 12px; font-size: .86rem; color: var(--text-soft); }

.modal-field { margin-bottom: 10px; }
.modal-field label { display: block; margin-bottom: 6px; font-size: .82rem; color: var(--text-soft); }

.modal-field textarea {
  width: 100%;
  min-height: 86px;
  border-radius: 12px;
  border: 1px solid #374151;
  background: #020617;
  color: var(--text-main);
  padding: 10px 12px;
  font-size: .95rem;
  resize: vertical;
  outline: none;
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.35),
    0 8px 18px rgba(0,0,0,.35);
}

.modal-field textarea:focus {
  border-color: #22c55e88;
  box-shadow:
    0 0 0 3px rgba(34,197,94,.16),
    0 10px 26px rgba(0,0,0,.45);
}

.modal-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }

.btn-sm {
  border-radius: 999px;
  border: 1px solid #4b5563;
  background: #020617;
  color: var(--text-main);
  padding: 7px 12px;
  font-size: .86rem;
  cursor: pointer;
}
.btn-sm-primary {
  border-color: #15803d;
  background: linear-gradient(135deg, #16a34a, #22c55e);
  color: #022c22;
  font-weight: 750;
}

.modal-file-label {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  background: #020617;
  border: 1px dashed #4b5563;
  font-size: .85rem;
  cursor: pointer;
}
.modal-file-label span { color: var(--text-soft); }
.modal-file-label:hover { border-style: solid; }
.modal-file-label input { display: none; }

.modal-file-name {
  display: block;
  margin-top: 6px;
  font-size: .78rem;
  color: var(--text-soft);
}

/* ================= MOBILE ================= */

@media (max-width: 900px) {
  .app-grid { grid-template-columns: 1fr; }
  #map { height: 300px; min-height: 300px; }
  header.app-header { flex-direction: column; align-items: flex-start; }
  .header-right { align-items: flex-start; }
  .user-info { align-items: flex-start; }
  .route-card { grid-template-columns: 1fr; }
}

/* CSS DO PERFIL */
.profile-header-card {
  background: linear-gradient(135deg, #064e3b, #022c22);
  border-radius: 16px; padding: 20px; display: flex; align-items: center; gap: 16px; margin-bottom: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
.profile-avatar {
  width: 60px; height: 60px; background: #22c55e; color: #022c22;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 24px; font-weight: bold; border: 2px solid #bbf7d0;
}
.profile-info h3 { margin: 0; font-size: 1rem; color: #fff; word-break: break-all; }
.badge-role { background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; color: #86efac; }
.profile-id { font-size: 0.7rem; color: #6ee7b7; margin-top: 4px; opacity: 0.8; }

.stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px; }
.stat-box { background: #0f172a; padding: 12px; border-radius: 12px; border: 1px solid #1e293b; text-align: center; }
.stat-num { display: block; font-size: 1.4rem; font-weight: bold; color: #22c55e; }
.stat-label { font-size: 0.7rem; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.5px; }

.menu-list { display: flex; flex-direction: column; gap: 10px; }
.menu-item {
  background: #0f172a; border: 1px solid #1e293b; color: #e5e7eb;
  padding: 16px; border-radius: 12px; text-align: left; font-size: 0.95rem; cursor: pointer;
  display: flex; align-items: center; gap: 10px;
}
.menu-item:active { background: #1e293b; }
.menu-item.danger { border-color: #7f1d1d; color: #fca5a5; background: #450a0a; }